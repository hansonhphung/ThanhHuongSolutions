@using ThanhHuongSolution.Models.Receiving;
@model ReceivingInformationModel

@{
    ViewBag.Title = "Nhập Hàng";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<header class="page-header">
    <h2>Nhập Hàng</h2>
</header>

<!-- start: page -->
<div class="row" ng-app="ThanhHuongSolution" ng-controller="ReceivingController">
    <div class="col-md-12" ng-init="init(@Json.Encode(Model))">
        <section class="panel">
            <div class="panel-body">

                <div class="row">
                    <div class="col-md-4 col-md-offset-8 form-horizontal">
                        <div class="form-group">
                            <label class="col-md-4 control-label">Ngày Lập <span class="required">*</span></label>
                            <div class="col-md-8">
                                <div class="input-group">
                                    <span class="input-group-addon">
                                        <i class="fa fa-calendar"></i>
                                    </span>
                                    <input class="form-control" ng-disabled="true" ng-model="createBillDate">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <section class="panel-body">
                        <div class="col-md-12 col-xs-12">
                            <header class="panel-heading">
                                <h2 class="panel-title">Thông Tin Nhập Hàng</h2>
                            </header>
                            <div class="panel-body">
                                <div class="col-md-4 col-xs-4 form-horizontal">
                                    <div class="form-group">
                                        <label class="col-md-4 control-label">Mặt Hàng <span class="required">*</span></label>
                                        <div class="col-md-8">
                                            <ui-select ng-model="selectedProduct" theme="bootstrap" on-select="selectProduct(selectedProduct)">

                                                <ui-select-match placeholder="Chọn mặt hàng...">
                                                    {{selectedProduct.Name | limitTo:20}} {{selectedProduct.Name.length < 20 ? '' : '...'}}
                                                </ui-select-match>

                                                <ui-select-choices repeat="product in lstProduct | filter: $select.search">
                                                    {{product.Name}}
                                                </ui-select-choices>
                                            </ui-select>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-3 col-xs-3 form-horizontal">
                                    <div class="form-group">
                                        <label class="col-md-4 control-label"> Giá Nhập <span class="required">*</span></label>
                                        <div class="col-md-8">
                                            <input type="number" class="form-control" ng-model="inputPrice" ng-disabled="isDisablePrice == true" required min="1" />
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-3 col-xs-3 form-horizontal">
                                    <div class="form-group">
                                        <label class="col-md-4 control-label">Số Lượng <span class="required">*</span></label>
                                        <div class="col-md-8">
                                            <input type="number" class="form-control" ng-model="number" required min="1" />
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-2 col-xs-2 center">
                                    <button type="button" class="mb-xs mt-xs mr-xs btn btn-success" ng-click="addProductItem()">Thêm</button>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>

                <div class="row">
                    <section class="panel-body">
                        <div class="col-md-12 col-xs-12">
                            <header class="panel-heading">
                                <h2 class="panel-title">Danh Sách Hàng Đã Chọn</h2>
                            </header>
                            <div class="panel-body">
                                <table class="table table-responsive table-striped">
                                    <thead>
                                        <tr>
                                            <th>Mã SP</th>
                                            <th>Tên SP</th>
                                            <th>Giá Nhập</th>
                                            <th>Số Lượng</th>
                                            <th>Thành Tiền</th>
                                            <th class="hidden-phone"></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="gradeX" ng-repeat="item in shoppingCart">
                                            <td>{{item.TrackingNumber}}</td>
                                            <td>{{item.Name}}</td>
                                            <td>{{item.Number}}</td>
                                            <td>{{item.Number}}</td>
                                            <td>{{item.TotalPrice}}</td>
                                            <td class="hidden-phone">
                                                <button type="button" class="btn btn-default" data-toggle="modal" data-target="#editItemShoppingcartFormModal" ng-click="viewItemInCart(item.TrackingNumber)"><i class="fa fa-edit"></i></button>
                                                <button type="button" class="btn btn-danger" ng-click="deleteItemInCart(item.TrackingNumber)"><i class="fa fa-trash-o"></i></button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <div style="text-align:center">
                                <div class="table-pagination">
                                    <uib-pagination boundary-links="true" total-items="totalProduct" ng-model="pageIndex" max-size="maxSize" class="pagination" rotate="false" items-per-page="recordPerPage" ng-change="onChangePageIndex()" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></uib-pagination>
                                </div>
                            </div>
                        </div>
                    </section>

                </div>

                <div class="row">
                    <div class="col-md-4 col-xs-4 center">
                        <button type="button" class="mb-xs mt-xs mr-xs btn btn-lg btn-success" ng-click="createBilling()">Nhập Hàng</button>
                        <button type="button" class="mb-xs mt-xs mr-xs btn btn-lg btn-warning" ng-click="cancel()">Hùy Bỏ</button>
                    </div>

                    <div class="col-md-8 col-xs-8 text-left">
                        <div class="row">
                            <div class="col-md-8 col-xs-8 text-right">
                                <h3>Thành Tiền :</h3>
                            </div>
                            <div class="col-md-4 col-xs-4 text-left">
                                <h3>{{totalAmount | number}} VND</h3>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-8 col-xs-8 text-right">
                                <h3>Phí Phát Sinh :</h3>
                            </div>
                            <div class="col-md-4 col-xs-4 text-left">
                                <h3><input type="number" class="form-control" ng-model="payAmount" min="0" ng-keyup="numberInputTypeKeyPress($event)" /></h3>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-8 col-xs-8 text-right">
                                <h3>Tổng Tiền :</h3>
                            </div>
                            <div class="col-md-4 col-xs-4 text-left">
                                <h3>{{liabilityAmount | number}} VND</h3>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>

<script src="/Vendor/angular/angular.min.js"></script>
<script src="~/Scripts/Receiving/ReceivingController.js"></script>